<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 WBC æ‡‰æ´ä¹‹æ—…</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,600;0,700;1,600&family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@600&display=swap" rel="stylesheet">

    <style>
        /* --- Light Morandi x Baseball x iOS 26 Design System --- */
        :root {
            /* Common Base */
            --radius-l: 32px;
            --radius-m: 20px;
            --radius-s: 12px;
            --font-stack: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
            --font-serif: 'Cormorant Garamond', serif;
            
            /* Light Mode (Default) */
            --bg-base: #F5F5F0;
            --text-main: #444444;
            --text-sub: #666666;
            --text-muted: #999999;
            
            /* Morandi Colors */
            --m-blue: #7D8A93;
            --m-red: #B87878;
            --m-green: #9EAFA2;
            --m-tan: #D6C6B0;
            --m-grey: #A0A0A0;
            --m-gold: #C5A065;

            /* Glass Effect */
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.9);
            --glass-blur: blur(35px);
            --shadow-soft: 0 10px 30px -5px rgba(125, 138, 147, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.9);
            
            /* Header Specific */
            --header-bg: linear-gradient(180deg, rgba(255,255,255,0.6) 0%, rgba(245,245,240,0) 100%);
            --header-text: #2c3e50;
            --watermark-color: rgba(125, 138, 147, 0.05);
            
            /* Table Specific */
            --table-bg: rgba(255,255,255,0.7);
            --table-row-hover: rgba(125, 138, 147, 0.05);
            --highlight-bg: rgba(184, 120, 120, 0.08);
            
            /* Editor Specific */
            --editor-bg: rgba(255, 255, 255, 0.8);
            --editor-toolbar-bg: rgba(220, 225, 230, 0.95); 
            --hr-color: rgba(125, 138, 147, 0.3);
            --editor-border: 2px solid rgba(125, 138, 147, 0.6);
            
            /* Nav Specific */
            --nav-bg: rgba(255, 255, 255, 0.25);
            --nav-blur: blur(50px);
            --nav-border: rgba(255, 255, 255, 0.3);
            --nav-active: #444444;
            --nav-inactive: #888888;
            --input-bg: rgba(255, 255, 255, 0.6);
        }

        /* --- Dark Mode Overrides --- */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-base: #121212;
                --text-main: #E0E0E0;
                --text-sub: #B0B0B0;
                --text-muted: #777777;

                --m-blue: #94A8B3; 
                --m-red: #D18C8C; 
                --m-green: #B3C7B7;
                --m-tan: #E0D0BA;
                
                --glass-bg: rgba(30, 30, 35, 0.75);
                --glass-border: rgba(255, 255, 255, 0.15);
                --shadow-soft: 0 10px 40px -5px rgba(0, 0, 0, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.1);

                --header-bg: linear-gradient(180deg, rgba(30,30,35,0.8) 0%, rgba(18,18,18,0) 100%);
                --header-text: #FFFFFF;
                --watermark-color: rgba(255, 255, 255, 0.03);

                --table-bg: rgba(44, 44, 46, 0.6);
                --table-row-hover: rgba(255, 255, 255, 0.05);
                --highlight-bg: rgba(209, 140, 140, 0.15);
                
                --editor-bg: rgba(44, 44, 46, 0.8);
                --editor-toolbar-bg: rgba(60, 60, 65, 0.95);
                --hr-color: rgba(255, 255, 255, 0.2);
                --editor-border: 2px solid rgba(148, 168, 179, 0.5);
                
                --nav-bg: rgba(30, 30, 35, 0.35);
                --nav-border: rgba(255, 255, 255, 0.1);
                --nav-active: #FFFFFF;
                --nav-inactive: #888888;
                --input-bg: rgba(60, 60, 65, 0.6);
            }
        }

        body {
            font-family: var(--font-stack);
            margin: 0;
            padding: 0;
            color: var(--text-main);
            background-color: var(--bg-base);
            -webkit-font-smoothing: antialiased;
            padding-bottom: 120px;
            min-height: 100vh;
            overflow-x: hidden;
            width: 100%;
            transition: background-color 0.3s ease, color 0.3s ease;
            
            background-image: 
                radial-gradient(circle at 10% 10%, rgba(125, 138, 147, 0.15), transparent 60%),
                radial-gradient(circle at 90% 20%, rgba(184, 120, 120, 0.1), transparent 50%),
                radial-gradient(circle at 50% 90%, rgba(158, 175, 162, 0.1), transparent 50%);
            background-attachment: fixed;
            background-size: cover;
            overscroll-behavior-x: none;
        }

        /* --- Header (Magazine Style) --- */
        .modern-header {
            padding: 60px 24px 20px;
            position: relative;
            background: var(--header-bg);
            overflow: hidden;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-soft);
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
        }
        .modern-header::before {
            content: '2026'; position: absolute; top: -30px; right: -20px; font-size: 160px; font-weight: 900;
            color: var(--watermark-color); z-index: 0; line-height: 1; font-family: var(--font-serif);
            transform: rotate(-10deg); pointer-events: none;
        }
        .header-inner { position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; }
        .top-pill {
            background: var(--glass-bg); border: 1px solid var(--glass-border); color: var(--m-blue);
            font-size: 11px; font-weight: 700; padding: 4px 12px; border-radius: 20px; letter-spacing: 2px;
            text-transform: uppercase; margin-bottom: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            display: flex; align-items: center; gap: 6px; backdrop-filter: blur(10px);
        }
        .top-pill::before { content: ''; display: block; width: 6px; height: 6px; background: var(--m-red); border-radius: 50%; }
        .title-city {
            font-family: var(--font-serif); font-size: 48px; font-weight: 700; line-height: 0.9;
            color: var(--header-text); letter-spacing: -1px; display: block;
        }
        .title-event {
            font-family: var(--font-stack); font-size: 14px; font-weight: 900; color: var(--m-red);
            letter-spacing: 4px; display: block; margin-top: 6px; margin-left: 4px;
        }
        .stitch-curve {
            margin-top: 10px; width: 40px; height: 4px;
            background: repeating-linear-gradient(90deg, var(--m-red) 0, var(--m-red) 3px, transparent 3px, transparent 7px);
            border-top: 2px solid var(--m-blue); border-bottom: 2px solid var(--m-blue); border-radius: 4px; opacity: 0.7;
        }

        /* --- Bottom Navigation (Slim) --- */
        .bottom-nav {
            position: fixed; 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%);
            width: 280px;
            background: var(--nav-bg);
            backdrop-filter: var(--nav-blur); 
            -webkit-backdrop-filter: var(--nav-blur);
            border: 1px solid var(--nav-border);
            height: 50px; 
            border-radius: 30px;
            display: flex; 
            justify-content: space-evenly;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 5px 25px rgba(0,0,0,0.15);
        }
        .nav-item {
            flex: 0 0 auto; 
            width: 60px;
            text-align: center; 
            cursor: pointer; 
            color: var(--nav-inactive);
            font-size: 9px; 
            font-weight: 700; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 2px;
        }
        .nav-item.active { 
            color: var(--nav-active); 
            transform: translateY(-2px);
            text-shadow: 0 0 10px rgba(255,255,255,0.2);
        }
        .nav-icon { font-size: 18px; display: block; margin-bottom: 0; }

        /* --- Top Sub-Navigation --- */
        .sub-nav-wrapper {
            position: sticky; top: 10px; z-index: 900; margin: 0 20px 15px;
            display: none;
        }
        .sub-nav-wrapper.active { display: block; animation: fadeIn 0.3s ease; }
        
        .sub-tabs-container {
            background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 50px; padding: 4px;
            display: flex; justify-content: flex-start; gap: 4px;
            overflow-x: auto; scrollbar-width: none; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .sub-tabs-container::-webkit-scrollbar { display: none; }
        
        .sub-tab-btn {
            flex: 0 0 auto; border: none; background: transparent; padding: 8px 16px; border-radius: 40px;
            font-family: var(--font-stack); font-size: 13px; color: var(--text-muted); cursor: pointer;
            transition: all 0.2s ease; text-align: center; font-weight: 600; min-width: 50px;
        }
        .sub-tab-btn.active {
            background: var(--text-main); color: var(--bg-base); box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* --- Content Layout --- */
        .view-section { display: none; }
        .view-section.active { display: block; }
        
        /* Default Day Content (Used in Tools/WBC, hidden by default) */
        .day-content { display: none; padding: 10px 20px 20px; }
        .day-content.active { display: block; }

        /* --- SMOOTH SLIDER STYLES (ITINERARY ONLY) --- */
        .slider-viewport { overflow: hidden; width: 100%; position: relative; }
        .slider-track {
            display: flex; 
            width: 100%; 
            align-items: flex-start;
            /* Ultra Smooth Transition - Heavy easing */
            will-change: transform, height;
            transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), height 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        }
        /* Specific rule for content INSIDE the slider */
        .slider-track > .day-content {
            display: block !important; /* Force block so flex works */
            min-width: 100%;
            opacity: 1;
            padding: 10px 20px 20px;
            box-sizing: border-box;
        }

        /* Animations */
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .anim-up { animation: slideUp 0.4s ease-out; }

        /* --- Flight Widget --- */
        .flight-widget {
            margin: 0 20px 15px; padding: 20px; background: var(--glass-bg); backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); border-radius: 24px;
            box-shadow: var(--shadow-soft); display: flex; justify-content: space-between; align-items: center; position: relative;
        }
        .flight-widget::before {
            content: ''; position: absolute; top: 8px; bottom: 8px; left: 8px; right: 8px;
            border: 1px dashed rgba(125, 138, 147, 0.3); border-radius: 20px; pointer-events: none;
        }
        .flight-label { font-size: 11px; color: var(--text-muted); margin-bottom: 2px; font-weight: 600; }
        .flight-val { font-family: var(--font-serif); font-size: 20px; font-weight: 800; color: var(--text-main); }
        .flight-icon { font-size: 18px; color: var(--m-blue); transform: rotate(45deg); opacity: 0.8; }
        .term-tag { font-size: 10px; background: var(--m-red); color: #fff; padding: 1px 5px; border-radius: 4px; margin-left: 4px; font-family: var(--font-stack); vertical-align: middle; }

        /* --- Timeline & Cards --- */
        .timeline-item { display: flex; margin-bottom: 30px; position: relative; }
        .timeline-item::before {
            content: ''; position: absolute; left: 24px; top: 18px; bottom: -35px; width: 2px;
            background: linear-gradient(to bottom, var(--m-blue) 0%, rgba(0,0,0,0) 100%); z-index: 0; opacity: 0.3;
        }
        .timeline-item:last-child::before { display: none; }
        .time-col { min-width: 50px; padding-top: 2px; z-index: 1; display: flex; flex-direction: column; align-items: center; }
        .diamond-dot {
            width: 12px; height: 12px; background: var(--bg-base); border: 3px solid var(--m-blue); transform: rotate(45deg); margin-bottom: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .time-text {
            font-size: 15px; font-weight: 700; color: var(--m-blue);
            background: var(--glass-bg); padding: 2px 5px; border-radius: 6px;
        }

        .card {
            flex: 1; margin-left: 15px; padding: 22px; background: var(--glass-bg); backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); border-radius: var(--radius-m);
            box-shadow: var(--shadow-soft); position: relative; overflow: hidden; transition: transform 0.2s;
        }
        .card-title {
            font-family: var(--font-stack); font-size: 18px; font-weight: 800; margin-bottom: 10px;
            color: var(--text-main); border-bottom: 1px solid var(--glass-border); padding-bottom: 8px;
        }
        .info-grid { display: grid; gap: 10px; }
        .info-row { font-size: 14px; line-height: 1.6; color: var(--text-sub); display: flex; align-items: baseline; font-weight: 500; }
        .info-text { flex: 1; word-wrap: break-word; overflow-wrap: break-word; }
        .badge {
            flex-shrink: 0; font-size: 11px; font-weight: 700; color: #FFF; padding: 3px 8px; border-radius: 6px; margin-right: 10px;
            min-width: 28px; text-align: center; letter-spacing: 0.5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .badge.eat { background: var(--m-red); } .badge.play { background: var(--m-green); } .badge.shop { background: var(--m-tan); color: #444; }
        .badge.wear { background: var(--m-blue); } .badge.move { background: var(--m-grey); color: #FFF; } .badge.stay { background: #8C8C8C; }

        .card.game-card { background: linear-gradient(135deg, var(--glass-bg), rgba(125, 138, 147, 0.1)); border-left: 4px solid var(--m-blue); }
        .game-header { font-size: 11px; color: var(--m-blue); letter-spacing: 1px; font-weight: 700; margin-bottom: 4px; text-transform: uppercase; }
        .game-title { font-size: 22px; font-weight: 800; color: var(--text-main); margin-bottom: 10px; }
        .analysis-box { background: var(--highlight-bg); border-radius: 8px; padding: 10px 12px; margin-bottom: 12px; border: 1px solid rgba(184, 120, 120, 0.2); }
        .analysis-title { font-size: 11px; color: var(--m-red); font-weight: 800; text-transform: uppercase; display: block; margin-bottom: 4px; letter-spacing: 1px; }
        .analysis-text { font-size: 13px; color: var(--text-sub); line-height: 1.6; text-align: justify; font-weight: 400; }
        .analysis-box ol { padding-left: 18px; margin: 4px 0; }
        .analysis-box li { margin-bottom: 3px; font-size: 13px; color: var(--text-sub); }

        .nav-btn {
            display: flex; align-items: center; justify-content: center; gap: 6px; width: 100%; box-sizing: border-box;
            background: rgba(125, 138, 147, 0.15); color: var(--m-blue); font-weight: 700; font-size: 14px; padding: 10px; border-radius: 12px;
            text-decoration: none; margin-top: 12px; border: 1px solid var(--glass-border); transition: all 0.2s;
        }
        .nav-btn:active { background: rgba(125, 138, 147, 0.3); }

        /* --- Calculator Styles --- */
        .calc-container { display: flex; flex-direction: column; gap: 15px; margin-top: 10px; }
        .calc-row { display: flex; flex-direction: column; gap: 5px; }
        .calc-label { font-size: 12px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .calc-input-wrapper { position: relative; }
        .calc-input {
            width: 100%; box-sizing: border-box; background: var(--input-bg); border: 2px solid transparent;
            border-radius: 16px; padding: 15px 15px 15px 50px; font-size: 28px; font-weight: 700;
            color: var(--text-main); font-family: var(--font-serif); outline: none; transition: all 0.3s;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        .calc-input:focus { border-color: var(--m-blue); background: var(--glass-bg); }
        .currency-flag { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); font-size: 24px; }
        .rate-display { text-align: center; font-size: 13px; color: var(--text-sub); margin-top: 5px; font-weight: 500; }
        .rate-display span { color: var(--m-red); font-weight: 700; }
        .rate-source { text-align: center; font-size: 11px; color: var(--text-muted); margin-top: 2px; }
        .reset-btn { position:absolute; right:0; top:0; font-size:12px; color:#FFF; background:var(--m-red); border:none; cursor:pointer; padding:4px 14px; font-weight:700; border-radius:15px; box-shadow: 0 2px 5px rgba(184,120,120,0.4); transition: transform 0.1s;}
        .reset-btn:active { transform: scale(0.95); }

        /* --- Editor Styles --- */
        .editor-container { display: flex; flex-direction: column; gap: 10px; }
        .editor-toolbar { 
            display: flex; gap: 8px; background: var(--editor-toolbar-bg); 
            padding: 8px; border-radius: 12px; border: 1px solid var(--glass-border); 
            flex-wrap: wrap; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .tool-btn {
            background: transparent; border: 1px solid var(--glass-border); color: var(--text-main);
            padding: 6px 10px; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 14px;
            min-width: 36px; display: flex; justify-content: center; align-items: center;
        }
        .color-wrapper { position: relative; display: flex; align-items: center; }
        .color-input-hidden { position: absolute; opacity: 0; width: 100%; height: 100%; top: 0; left: 0; cursor: pointer; }
        
        .shopping-editor {
            width: 100%; min-height: 350px; background: var(--editor-bg);
            border: var(--editor-border);
            border-radius: 16px; padding: 20px; font-family: var(--font-stack); font-size: 16px; color: var(--text-main);
            outline: none; box-sizing: border-box; line-height: 1.7; overflow-y: auto;
        }
        .shopping-editor:focus { border-color: var(--m-blue); box-shadow: 0 0 0 4px rgba(125, 138, 147, 0.4); }
        .shopping-editor ul, .shopping-editor ol { padding-left: 20px; margin: 5px 0; }
        .shopping-editor li { margin-bottom: 5px; }
        .shopping-editor hr { border: 0; border-top: 2px dashed var(--hr-color); margin: 15px 0; }

        /* --- WBC Table --- */
        .wbc-table-container { border-radius: var(--radius-m); box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 25px; }
        .wbc-table { width: 100%; border-collapse: collapse; font-size: 14px; background: var(--table-bg); table-layout: fixed; }
        .wbc-table th:first-child, .wbc-table td:first-child { width: 45px; background: var(--m-blue); color: white; font-weight: 700; padding: 12px 5px; text-align: center; white-space: nowrap; }
        .wbc-table td:first-child { background: transparent; color: var(--text-main); }
        .wbc-table th:nth-child(2), .wbc-table td:nth-child(2) { padding: 14px 12px; text-align: left; white-space: normal; word-wrap: break-word; }
        .wbc-table th:nth-child(2) { background: var(--m-blue); color: white; }
        .wbc-table th:nth-child(3), .wbc-table td:nth-child(3) { width: 50px; padding: 12px 5px; text-align: center; white-space: nowrap; }
        .wbc-table th:nth-child(3) { background: var(--m-blue); color: white; }
        .wbc-table tr:last-child td { border-bottom: none; }
        .wbc-table tr:nth-child(even) { background-color: var(--table-row-hover); }
        .tpe-highlight { background-color: var(--highlight-bg) !important; }
        .point-text { display: block; margin-top: 6px; font-size: 13px; color: var(--m-red); font-weight: 500; line-height: 1.5; }
        .team-name { font-weight: 800; font-size: 18px; color: var(--text-main); display: block; line-height: 1.4; margin-bottom: 2px; }
        .pool-teams { display: block; margin-top: 4px; font-size: 13px; font-weight: 500; color: var(--text-sub); line-height: 1.5; }
        footer { text-align: center; font-size: 13px; color: var(--text-muted); padding: 50px 20px; font-style: italic; }
    </style>
</head>
<body>

    <header class="modern-header">
        <div class="header-inner">
            <div class="top-pill">Fred's Journey</div>
            <div class="main-title-group">
                <span class="title-city">TOKYO</span>
                <span class="title-event">WBC 2026</span>
            </div>
            <div class="stitch-curve"></div>
            <div class="sub-caption">Cheering for <span style="color:var(--m-red); font-weight:800;">TPE ğŸ‡¹ğŸ‡¼</span></div>
        </div>
    </header>

    <div id="sub-nav-itinerary" class="sub-nav-wrapper active">
        <div class="sub-tabs-container">
            <button class="sub-tab-btn active" data-tab="d1" onclick="showSubTab('d1', this)">3/5 (å››)</button>
            <button class="sub-tab-btn" data-tab="d2" onclick="showSubTab('d2', this)">3/6 (äº”)</button>
            <button class="sub-tab-btn" data-tab="d3" onclick="showSubTab('d3', this)">3/7 (å…­)</button>
            <button class="sub-tab-btn" data-tab="d4" onclick="showSubTab('d4', this)">3/8 (æ—¥)</button>
            <button class="sub-tab-btn" data-tab="d5" onclick="showSubTab('d5', this)">3/9 (ä¸€)</button>
        </div>
    </div>

    <div id="sub-nav-tools" class="sub-nav-wrapper">
        <div class="sub-tabs-container" style="justify-content: center;">
            <button class="sub-tab-btn active" onclick="showSubTab('shop', this)">å¿…è²·æ¸…å–®</button>
            <button class="sub-tab-btn" onclick="showSubTab('calc', this)">åŒ¯ç‡æ›ç®—</button>
        </div>
    </div>

    <div id="view-itinerary" class="view-section active">
        <div class="flight-widget">
            <div>
                <div class="flight-label">å»ç¨‹ (3/5)</div>
                <div class="flight-val">BR190 <span class="term-tag">T1</span></div>
                <div style="color:var(--text-muted); font-size:13px; font-weight:500;">16:30 TSA</div>
            </div>
            <div class="flight-icon">âœˆ</div>
            <div style="text-align:right;">
                <div class="flight-label">å›ç¨‹ (3/9)</div>
                <div class="flight-val">BR189 <span class="term-tag">T3</span></div>
                <div style="color:var(--text-muted); font-size:13px; font-weight:500;">10:25 HND</div>
            </div>
        </div>

        <div class="slider-viewport" id="itinerary-slider-view">
            <div class="slider-track" id="itinerary-track">
                
                <div id="d1" class="day-content">
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">20:20</div></div>
                        <div class="card">
                            <div class="card-title">ç¾½ç”°æ©Ÿå ´ (HND)</div>
                            <div class="analysis-box">
                                <span class="analysis-title">ğŸ‡¯ğŸ‡µ å…¥å¢ƒé€šé—œæŒ‡å—</span>
                                <ol>
                                    <li><strong>æª¢ç–«</strong>ï¼šä¾æŒ‡ç¤ºå‰é€²ã€‚</li>
                                    <li><strong>å…¥åœ‹å¯©æŸ¥</strong>ï¼šå‡ºç¤ºè­·ç…§èˆ‡ VJW QR Codeã€‚</li>
                                    <li><strong>æå–è¡Œæ</strong>ï¼šç¢ºèªèˆªç­è¡Œæè½‰ç›¤ã€‚</li>
                                    <li><strong>ç¨…é—œç”³å ±</strong>ï¼šæƒæ VJW ç”³å ± QR Codeã€‚</li>
                                </ol>
                            </div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge move">è¡Œ</span>å‡ºé—œå¾Œä¾æŒ‡æ¨™æ­ä¹˜ã€Œäº¬æ€¥ç·šã€å¾€æ©«æ¿±ã€‚</div>
                            </div>
                            <div class="action-row">
                                <a href="https://vjw-lp.digital.go.jp/en/" target="_blank" class="nav-btn">ğŸ”— Visit Japan Web</a>
                                <a href="https://www.google.com/maps/search/?api=1&query=Tokyo+Tower5" target="_blank" class="nav-btn">ğŸ“ é–‹å§‹å°èˆª</a>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">22:00</div></div>
                        <div class="card">
                            <div class="card-title">æ©«æ¿±é—œå…§ (Base)</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge stay">ä½</span>æŠµé”æœ‹å‹å®¶å®‰ç½®è¡Œæã€‚</div>
                                <div class="info-row"><span class="badge eat">é£Ÿ</span>å®µå¤œï¼šä¼Šå‹¢ä½æœ¨ç”ºã€Œä¸€è˜­ã€æˆ–ã€Œä¸‰ç”°è£½éºµæ‰€ã€ã€‚</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="d2" class="day-content">
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">10:00</div></div>
                        <div class="card">
                            <div class="card-title">æ©«é ˆè³€è»æ¸¯ä¹‹æ—…</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge move">è¡Œ</span>æ­ä¹˜äº¬æ€¥ç·šè‡³ã€Œæ©«é ˆè³€ä¸­å¤®ç«™ã€æˆ– JR è‡³ã€Œæ©«é ˆè³€ç«™ã€ã€‚</div>
                                <div class="info-row"><span class="badge play">æ¨‚</span>ä¸‰ç¬ å…¬åœ’åƒè§€ä¸–ç•Œä¸‰å¤§ç´€å¿µè‰¦ã€Œä¸‰ç¬ è™Ÿã€ã€‚</div>
                            </div>
                            <a href="https://www.google.com/maps?q=Mikasa+Park" target="_blank" class="nav-btn">ğŸ“ å°èˆªä¸‰ç¬ å…¬åœ’</a>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">13:00</div></div>
                        <div class="card">
                            <div class="card-title">æµ·è»å’–å“© & æºæ¿é€š</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge eat">é£Ÿ</span>å“åšé“åœ°ã€Œæ©«é ˆè³€æµ·è»å’–å“©ã€æˆ–ã€Œæµ·è»æ¼¢å ¡ã€ã€‚</div>
                                <div class="info-row"><span class="badge play">æ¨‚</span>æ¼«æ­¥ Dobuita Streetï¼Œæ„Ÿå—æ¿ƒåšç¾å¼é¢¨æƒ…ï¼Œé¸è³¼ Sukajan åˆºç¹¡å¤–å¥—ã€‚</div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">16:00</div></div>
                        <div class="card">
                            <div class="card-title">æ©«æ¿±ç«™å‰å¤§æ¡è³¼</div>
                            <div class="info-grid">
                                <div class="info-row">
                                    <span class="badge shop">è²·</span>
                                    <span class="info-text"><strong>Bic Camera</strong>ï¼šæ©«æ¿±ç«™è¥¿å£åº—ï¼Œæ¡è³¼é›»å™¨ 3Cã€‚</span>
                                </div>
                                <div class="info-row">
                                    <span class="badge shop">è²·</span>
                                    <span class="info-text"><strong>ç„¡å°è‰¯å“</strong>ï¼šç›¸éµ JOINUS æˆ– NEWoMan æ©«æ¿±åº—ã€‚</span>
                                </div>
                                <div class="info-row">
                                    <span class="badge shop">è²·</span>
                                    <span class="info-text"><strong>è—¥å¦åº—</strong>ï¼šæ¾æœ¬æ¸…ã€SunDrug è£œè²¨ã€‚</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">18:30</div></div>
                        <div class="card">
                            <div class="card-title">è¿”å›ä½æ‰€ (å‚™æˆ°)</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge move">è¡Œ</span>å¸¶è‘—æˆ°åˆ©å“è¿”å›æ©«æ¿±é—œå…§ä½æ‰€ã€‚</div>
                                <div class="info-row"><span class="badge eat">é£Ÿ</span>æ²¿é€”æ¡è²·æ™šé¤èˆ‡æ‡‰æ´é…’æ°´ã€‚</div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot" style="background:var(--m-red); border-color:var(--m-red);"></div><div class="time-text" style="color:var(--m-red);">19:00</div></div>
                        <div class="card game-card">
                            <div class="game-header">Pool C â€¢ Game 1 (Online Streaming)</div>
                            <div class="card-title" style="color:var(--text-main);">ğŸ‡¹ğŸ‡¼ TPE vs ğŸ‡¯ğŸ‡µ JPN</div>
                            <div class="analysis-box">
                                <span class="analysis-title">ğŸ“º ä½æ‰€ç·šä¸Šæ‡‰æ´</span>
                                <span class="analysis-text">é›–ç„¶æœªé€²å ´ï¼Œä½†åœ¨ä½æ‰€èˆ’é©åœ°è§€çœ‹ç›´æ’­ï¼Œä¸ç”¨äººæ“ äººï¼Œæ›´èƒ½å°ˆæ³¨æ–¼æ¯ä¸€å€‹ç²¾å½©å¥½çƒï¼</span>
                            </div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge wear">è¡£</span>æ›ä¸Šèˆ’é©å±…å®¶æœï¼ŒæŠ«ä¸Šä¸­è¯éšŠæ¯›å·¾ï¼</div>
                                <div class="info-row"><span class="badge eat">é£Ÿ</span>äº«ç”¨å‰›è²·å¥½çš„è±ç››æ™šé¤èˆ‡é£²æ–™ã€‚</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="d3" class="day-content">
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">10:00</div></div>
                        <div class="card">
                            <div class="card-title">æ—©æ™¨ç§»å‹•</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge move">è¡Œ</span>åˆå ´æ¯”è³½éœ€æ—©èµ·ã€‚å»ºè­° 10:00 å‰æŠµé”æ°´é“æ©‹ã€‚</div>
                                <div class="info-row"><span class="badge eat">é£Ÿ</span>æ—©é¤ï¼šä¾¿åˆ©å•†åº—é£¯ç³°ã€‚</div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot" style="background:var(--m-red); border-color:var(--m-red);"></div><div class="time-text" style="color:var(--m-red);">12:00</div></div>
                        <div class="card game-card">
                            <div class="game-header">Pool C â€¢ Game 2</div>
                            <div class="card-title" style="color:var(--text-main);">ğŸ‡¨ğŸ‡¿ CZE vs ğŸ‡¹ğŸ‡¼ TPE</div>
                            <div class="analysis-box">
                                <span class="analysis-title">âš¾ æˆ°æƒ…çŸ­è©•</span>
                                <span class="analysis-text">æ–œæ§“é¬¥å£« vs è·æ¥­èè‹±ã€‚æ·å…‹éšŠä»¥ã€Œå¹³æ—¥ä¸Šç­ã€å‡æ—¥æ‰“çƒã€çš„ç†±è¡€æ•…äº‹èåï¼Œçƒé¢¨ç©©å¥ä¸”é¬¥å¿—é«˜æ˜‚ã€‚ä¸­è¯éšŠéœ€ç©©ç´®ç©©æ‰“ï¼Œé¿å…è¢«çˆ†å†·ï¼Œé€™æ˜¯æ¶ä¸‹æ™‰ç´šé–€ç¥¨çš„å¿…å‹ä¹‹æˆ°ã€‚</span>
                            </div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge wear">è¡£</span>å·¨è›‹å…§æœ‰ç©ºèª¿ï¼Œå»ºè­°æ´‹è”¥å¼ç©¿æ­ã€‚</div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">17:00</div></div>
                        <div class="card">
                            <div class="card-title">æ±äº¬éµå¡”</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge play">æ¨‚</span>è³½å¾Œå‰å¾€èŠå…¬åœ’æˆ–èµ¤ç¾½æ©‹ï¼Œæ‹æ”ç¶“å…¸ç´…ç™½éµå¡”èˆ‡é»ƒæ˜ç¾æ™¯ã€‚æ™šé¤å¯æ–¼é™„è¿‘çš„éº»å¸ƒå°ä¹‹ä¸˜æˆ–æ–°æ©‹äº«ç”¨ã€‚</div>
                            </div>
                            <a href="https://www.google.com/maps/search/?api=1&query=Ginza+Uniqlo+Tokyo" target="_blank" class="nav-btn">ğŸ“ å°èˆª</a>
                        </div>
                    </div>
                </div>

                <div id="d4" class="day-content">
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">08:30</div></div>
                        <div class="card">
                            <div class="card-title">æ·ºè‰å¯ºåƒæ‹œ</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge play">æ¨‚</span>æ—©èµ·å‰å¾€æ·ºè‰é›·é–€ï¼Œé¿é–‹äººæ½®ï¼Œåƒæ‹œè§€éŸ³ç¥ˆæ±‚ä¸­è¯éšŠå¿…å‹ã€‚</div>
                                <div class="info-row"><span class="badge move">è¡Œ</span>åƒæ‹œå¾Œæ­ä¹˜éŠ€åº§ç·š/ä¸¸ä¹‹å…§ç·šå‰å¾€æ±äº¬å·¨è›‹ã€‚</div>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot" style="background:var(--m-red); border-color:var(--m-red);"></div><div class="time-text" style="color:var(--m-red);">12:00</div></div>
                        <div class="card game-card">
                            <div class="game-header">Pool C â€¢ Game 3</div>
                            <div class="card-title" style="color:var(--text-main);">ğŸ‡°ğŸ‡· KOR vs ğŸ‡¹ğŸ‡¼ TPE</div>
                            <div class="analysis-box">
                                <span class="analysis-title">âš¾ æˆ°æƒ…çŸ­è©•</span>
                                <span class="analysis-text">å®¿å‘½å°æ±ºï¼æ”¸é—œåˆ†çµ„æ™‰ç´šçš„æœ€é—œéµæˆ°å½¹ã€‚æ°£æ°›å°‡æ¯”æ—¥éŸ“æˆ°æ›´ç‚ºç·Šç¹ƒï¼Œè«‹æº–å‚™å¥½æœ€å¼·ç«åŠ›ï¼</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">18:00</div></div>
                        <div class="card">
                            <div class="card-title">ALEGRIA æ…¶åŠŸå®´</div>
                            <div class="info-grid">
                                <div class="info-row">
                                    <span class="badge eat">é£Ÿ</span>
                                    <span class="info-text">è³½å¾Œç§»å‹•å›æ©«æ¿±ï¼Œæ–¼ <strong>ALEGRIA Minatomirai</strong> äº«ç”¨ 20 ç¨®å·´è¥¿çƒ¤è‚‰åƒåˆ°é£½èˆ‡å•¤é…’ï¼Œå¤§å£åƒè‚‰æ…¶ç¥å‹åˆ©ï¼</span>
                                </div>
                                <div class="info-row"><span class="badge play">æ¨‚</span>é¤å¾Œæ¼«æ­¥æ¸¯æœªä¾†ï¼Œæ¬£è³æ‘©å¤©è¼ªå¤œæ™¯ã€‚</div>
                            </div>
                            <a href="https://maps.app.goo.gl/YourMapLinkHere" target="_blank" class="nav-btn">ğŸ“ å°èˆª ALEGRIA</a>
                        </div>
                    </div>
                </div>

                <div id="d5" class="day-content">
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">07:00</div></div>
                        <div class="card">
                            <div class="card-title">å‰å¾€ç¾½ç”°æ©Ÿå ´</div>
                            <div class="analysis-box">
                                <span class="analysis-title">âœˆï¸ å‡ºå¢ƒé›¢æ—¥æµç¨‹</span>
                                <ol>
                                    <li><strong>å ±åˆ°</strong>: 3F å‡ºç™¼å¤§å»³ã€‚</li>
                                    <li><strong>å®‰æª¢</strong>: å–å‡ºç­†é›»æ¶²é«”ã€‚</li>
                                    <li><strong>å‡ºå¢ƒ</strong>: ä½¿ç”¨ Face Express æˆ–äººå·¥ã€‚</li>
                                </ol>
                            </div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge move">è¡Œ</span>ä¸Šç­æ—¥é›»è»Šæ“æ“ ï¼Œå‹™å¿… 07:00 å‡ºç™¼ã€‚</div>
                                <div class="info-row"><span class="badge stay">ä½</span>æ•´ç†è¡Œæï¼Œæ„Ÿè¬æœ‹å‹æ‹›å¾…ã€‚</div>
                            </div>
                            <a href="https://www.keikyu.co.jp/" target="_blank" class="nav-btn">ğŸ“ æ™‚åˆ»è¡¨ (æ—¥æ–‡å®˜ç¶²)</a>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-col"><div class="diamond-dot"></div><div class="time-text">10:25</div></div>
                        <div class="card">
                            <div class="card-title">BR189 è¿”å°</div>
                            <div class="info-grid">
                                <div class="info-row"><span class="badge shop">è²·</span>æœ€å¾Œè¡åˆºï¼šæ©Ÿå ´å…ç¨…åº—ã€‚</div>
                                <div class="info-row"><span class="badge move">å®¶</span>é è¨ˆ 13:25 æŠµé”å°åŒ—æ¾å±±ã€‚</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> </div> </div>

    <div id="view-tools" class="view-section">
        <div id="shop" class="day-content active">
            <div class="card" style="margin-left:0;">
                <div class="card-title" style="display:flex; justify-content:space-between; align-items:center;">
                    å¿…è²·æ¸…å–® ğŸ›ï¸
                    <span style="font-size:12px; font-weight:400; color:var(--text-muted);">Auto-saved</span>
                </div>
                <div class="editor-container">
                    <div class="editor-toolbar">
                        <button class="tool-btn" onclick="formatDoc('bold')" title="ç²—é«”"><b>B</b></button>
                        <button class="tool-btn" onclick="formatDoc('italic')" title="æ–œé«”"><i>I</i></button>
                        <button class="tool-btn" onclick="formatDoc('insertUnorderedList')" title="æ¸…å–®">â‰£</button>
                        <button class="tool-btn" onclick="formatDoc('insertHorizontalRule')" title="åˆ†éš”ç·š">â€•</button>
                        <button class="tool-btn color-wrapper" title="æ–‡å­—é¡è‰²">
                            ğŸ¨
                            <input type="color" class="color-input-hidden" onchange="formatDoc('foreColor', this.value)">
                        </button>
                        <button class="tool-btn" onclick="selectAllContent()" title="å…¨é¸">å…¨é¸</button>
                    </div>
                    <div id="shoppingNote" class="shopping-editor" contenteditable="true">
                        <div>è¼¸å…¥è³¼ç‰©æ¸…å–®...</div>
                        <hr>
                        <div><b>è—¥å¦ï¼š</b></div>
                        <ul><li>åˆåˆ©ä»–å‘½</li><li>EVE æ­¢ç—›è—¥</li></ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="calc" class="day-content">
            <div class="card" style="margin-left:0;">
                <div class="card-title" style="position:relative;">
                    åŒ¯ç‡æ›ç®— ğŸ’±
                    <button class="reset-btn" onclick="resetCalc()">â†º é‡è¨­</button>
                </div>
                <div class="analysis-box" style="margin-bottom:20px;">
                    <span class="analysis-text">ä»¥å³æ™‚åŒ¯ç‡æ›ç®— (è‹¥é›¢ç·šå‰‡ä½¿ç”¨ 0.215)</span>
                </div>
                <div class="calc-container">
                    <div class="calc-row">
                        <span class="calc-label">JPY æ—¥å¹£</span>
                        <div class="calc-input-wrapper">
                            <span class="currency-flag">ğŸ‡¯ğŸ‡µ</span>
                            <input type="number" id="input-jpy" class="calc-input" placeholder="0">
                        </div>
                    </div>
                    <div style="text-align:center; color:var(--m-blue); font-size:20px;">â‡…</div>
                    <div class="calc-row">
                        <span class="calc-label">TWD å°å¹£</span>
                        <div class="calc-input-wrapper">
                            <span class="currency-flag">ğŸ‡¹ğŸ‡¼</span>
                            <input type="number" id="input-twd" class="calc-input" placeholder="0">
                        </div>
                    </div>
                    <div class="rate-display">ç›®å‰åŒ¯ç‡: 1 JPY â‰ˆ <span id="rate-val">0.215</span> TWD</div>
                    <div id="rate-source" class="rate-source">è³‡æ–™ä¾†æº: è¼‰å…¥ä¸­...</div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-wbc" class="view-section">
        <div class="day-content active" style="padding-top:10px;">
            <div class="card" style="margin-left:0; margin-top:20px;">
                <div class="card-title">
                    Pool C (Tokyo)
                    <span class="pool-teams">ğŸ‡¹ğŸ‡¼ å°ç£ãƒ»ğŸ‡¯ğŸ‡µ æ—¥æœ¬ãƒ»ğŸ‡°ğŸ‡· éŸ“åœ‹ãƒ»ğŸ‡¦ğŸ‡º æ¾³æ´²ãƒ»ğŸ‡¨ğŸ‡¿ æ·å…‹</span>
                </div>
                <div class="wbc-table-container">
                    <table class="wbc-table">
                        <thead>
                            <tr><th>Date</th><th>Matchup & Key Point</th><th>Time</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>3/5</td><td><span class="team-name">ğŸ‡¦ğŸ‡º AUS vs ğŸ‡¹ğŸ‡¼ TPE</span><span class="point-text">é¦–æˆ°å³æ±ºæˆ°ï¼æ¾³æ´²è¿‘å¹´é•·æ‰“å¯¦åŠ›å¤§å¢ï¼Œä¸”æ“æœ‰å¤šä½ç¾è·é«”ç³»æ–°ç§€ã€‚ä¸­è¯éšŠéœ€é éˆæ´»èª¿åº¦èˆ‡æˆ°è¡“æ¶ä¸‹é–‹é–€ç´…ã€‚</span></td><td>12:00</td></tr>
                            <tr><td>3/5</td><td><span class="team-name">ğŸ‡°ğŸ‡· KOR vs ğŸ‡¨ğŸ‡¿ CZE</span><span class="point-text">éŸ“åœ‹éšŠä¸Šå±†çˆ†å†·å‡ºå±€çš„é™°å½±çŒ¶åœ¨ï¼Œæ­¤æˆ°å‹¢å¿…ç²¾éŠ³ç›¡å‡ºä»¥æ±‚ç©©ä½é™£è…³ã€‚</span></td><td>19:00</td></tr>
                            <tr><td>3/6</td><td><span class="team-name">ğŸ‡¨ğŸ‡¿ CZE vs ğŸ‡¦ğŸ‡º AUS</span><span class="point-text">æ­æ´²èˆ‡å¤§æ´‹æ´²çš„çƒé¢¨ç¢°æ’ã€‚æ·å…‹éšŠçš„åœ˜éšŠé»˜å¥‘æ¥µä½³ï¼Œå°æŠ—æ¾³æ´²éšŠçš„ç¾å¼å¼·åŠ›æ£’çƒã€‚</span></td><td>12:00</td></tr>
                            <tr class="tpe-highlight"><td>3/6</td><td><span class="team-name" style="color:var(--m-blue);">ğŸ‡¹ğŸ‡¼ TPE vs ğŸ‡¯ğŸ‡µ JPN</span><span class="point-text">è¬çœ¾çŸšç›®ï¼å°ç£é»ƒé‡‘æ‰“ç·šæŒ‘æˆ°æ—¥æœ¬ã€Œä¾Japanã€å…¨æ˜æ˜Ÿé™£å®¹ã€‚ç„¡è«–å‹è² éƒ½æ˜¯æœ€é›£å¿˜çš„æ™‚åˆ»ã€‚</span></td><td>19:00</td></tr>
                            <tr class="tpe-highlight"><td>3/7</td><td><span class="team-name" style="color:var(--m-blue);">ğŸ‡¨ğŸ‡¿ CZE vs ğŸ‡¹ğŸ‡¼ TPE</span><span class="point-text">çµ•å°ä¸èƒ½è¼•æ•µï¼æ·å…‹æŠ•æ‰‹çš„çƒé€Ÿé›–ä¸å¿«ï¼Œä½†æ€ªç•°çš„å‡ºæ‰‹é»å®¹æ˜“è®“æ‰“è€…ç†„ç«ã€‚é€™æ˜¯ç´¯ç©æ·¨å‹åˆ†çš„é—œéµæˆ°ã€‚</span></td><td>12:00</td></tr>
                            <tr><td>3/7</td><td><span class="team-name">ğŸ‡°ğŸ‡· KOR vs ğŸ‡¯ğŸ‡µ JPN</span><span class="point-text">äºæ´²æ£’çƒæœ€é«˜æ®¿å ‚çš„ã€Œä¸–ä»‡å°æ±ºã€ï¼æ±äº¬å·¨è›‹å°‡åŒ–èº«ç‚ºæ²¸é¨°çš„å£“åŠ›é‹ã€‚</span></td><td>19:00</td></tr>
                            <tr class="tpe-highlight"><td>3/8</td><td><span class="team-name" style="color:var(--m-blue);">ğŸ‡°ğŸ‡· KOR vs ğŸ‡¹ğŸ‡¼ TPE</span><span class="point-text">å®¿å‘½å¾©ä»‡æˆ°ï¼é€™å ´æ¯”è³½æ¥µé«˜æ©Ÿç‡æ±ºå®šèª°èƒ½ä»¥åˆ†çµ„ç¬¬äºŒæ™‰ç´šã€‚è«‹æº–å‚™å¥½æœ€å¼·çš„æ‡‰æ´ç«åŠ›ã€‚</span></td><td>12:00</td></tr>
                            <tr><td>3/8</td><td><span class="team-name">ğŸ‡¦ğŸ‡º AUS vs ğŸ‡¯ğŸ‡µ JPN</span><span class="point-text">æ¾³æ´²è‹¥èƒ½å’¬ä½æ¯”åˆ†ï¼Œå°‡æœ‰æ©Ÿæœƒè£½é€ æœ¬å±†è³½äº‹æœ€å¤§å†·é–€ã€‚</span></td><td>19:00</td></tr>
                            <tr><td>3/9</td><td><span class="team-name">ğŸ‡¦ğŸ‡º AUS vs ğŸ‡°ğŸ‡· KOR</span><span class="point-text">å°çµ„è³½å°¾è²çš„é—œéµæˆ°å½¹ã€‚è‹¥æˆ°æ³è† è‘—ï¼Œæ­¤æˆ°å¯èƒ½æˆç‚ºã€Œé©Ÿæ­»è³½ã€ã€‚</span></td><td>19:00</td></tr>
                            <tr><td>3/10</td><td><span class="team-name">ğŸ‡¯ğŸ‡µ JPN vs ğŸ‡¨ğŸ‡¿ CZE</span><span class="point-text">å……æ»¿æ•¬æ„çš„å‹èª¼ä¹‹æˆ°ï¼Œé è¨ˆå°‡æ˜¯ä¸€å ´æ°£æ°›æº«é¦¨çš„æ¯”è³½ã€‚</span></td><td>19:00</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchMainView('itinerary', this)">
            <span class="nav-icon">ğŸ“…</span>
            <span>è¡Œç¨‹</span>
        </div>
        <div class="nav-item" onclick="switchMainView('wbc', this)">
            <span class="nav-icon">âš¾</span>
            <span>æˆ°æƒ…</span>
        </div>
        <div class="nav-item" onclick="switchMainView('tools', this)">
            <span class="nav-icon">ğŸ§°</span>
            <span>å·¥å…·</span>
        </div>
    </div>

    <script>
        let currentRate = 0.215; // Default rate

        // --- Navigation Logic ---
        function switchMainView(viewName, btn) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById('view-' + viewName).classList.add('active');
            
            document.querySelectorAll('.bottom-nav .nav-item').forEach(el => el.classList.remove('active'));
            btn.classList.add('active');

            document.querySelectorAll('.sub-nav-wrapper').forEach(el => el.classList.remove('active'));
            if (viewName === 'itinerary') {
                document.getElementById('sub-nav-itinerary').classList.add('active');
                // Force update height on view switch (fix for height 0 bug)
                const currentTabBtn = document.querySelector('#sub-nav-itinerary .sub-tab-btn.active');
                if(currentTabBtn) {
                    const tabId = currentTabBtn.getAttribute('data-tab');
                    updateSliderHeight(tabId);
                }
            } else if (viewName === 'tools') {
                document.getElementById('sub-nav-tools').classList.add('active');
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showSubTab(tabId, btn, animationClass = 'anim-up') {
            const parentViewId = btn.closest('.sub-nav-wrapper').id;
            
            if (parentViewId === 'sub-nav-itinerary') {
                // Slider Logic for Itinerary
                const allBtns = document.querySelectorAll('#sub-nav-itinerary .sub-tab-btn');
                allBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Calculate index (d1 -> 0, d2 -> 1, ...)
                const index = parseInt(tabId.replace('d', '')) - 1;
                const track = document.getElementById('itinerary-track');
                track.style.transform = `translateX(-${index * 100}%)`;
                
                // Update Height
                updateSliderHeight(tabId);

            } else {
                // Standard Tab Logic for Tools
                const parentView = document.getElementById('view-tools');
                
                // Reset active class for buttons in this specific sub-nav
                btn.parentElement.querySelectorAll('.sub-tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Toggle Content
                parentView.querySelectorAll('.day-content').forEach(c => c.classList.remove('active', 'anim-up'));
                const target = document.getElementById(tabId);
                target.classList.add('active', 'anim-up');
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateSliderHeight(tabId) {
            const activeSlide = document.getElementById(tabId);
            const track = document.getElementById('itinerary-track');
            if(activeSlide && track) {
                setTimeout(() => {
                    track.style.height = activeSlide.offsetHeight + 'px';
                }, 10);
            }
        }

        // --- Swipe Logic for Itinerary ---
        let touchStartX = 0;
        const itineraryView = document.getElementById('view-itinerary');
        const days = ['d1', 'd2', 'd3', 'd4', 'd5'];

        itineraryView.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        }, {passive: true});

        itineraryView.addEventListener('touchend', e => {
            const touchEndX = e.changedTouches[0].screenX;
            handleSwipe(touchStartX, touchEndX);
        }, {passive: true});

        function handleSwipe(start, end) {
            const threshold = 60; // min swipe distance
            const diff = start - end;
            
            // Find current active day index
            const currentTab = document.querySelector('#sub-nav-itinerary .sub-tab-btn.active');
            if (!currentTab) return;
            const currentId = currentTab.getAttribute('data-tab');
            const currentIndex = days.indexOf(currentId);

            if (Math.abs(diff) > threshold) {
                if (diff > 0) {
                    // Swipe Left -> Next Day
                    if (currentIndex < days.length - 1) {
                        const nextId = days[currentIndex + 1];
                        const nextBtn = document.querySelector(`[data-tab="${nextId}"]`);
                        showSubTab(nextId, nextBtn); 
                    }
                } else {
                    // Swipe Right -> Prev Day
                    if (currentIndex > 0) {
                        const prevId = days[currentIndex - 1];
                        const prevBtn = document.querySelector(`[data-tab="${prevId}"]`);
                        showSubTab(prevId, prevBtn);
                    }
                }
            }
        }

        // --- Shopping List Logic ---
        function formatDoc(cmd, value=null) {
            document.execCommand(cmd, false, value);
            saveNote();
        }
        
        function selectAllContent() {
            const editor = document.getElementById('shoppingNote');
            const range = document.createRange();
            range.selectNodeContents(editor);
            const sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        }

        function saveNote() {
            const editor = document.getElementById('shoppingNote');
            if (editor) localStorage.setItem('wbc_shopping_note_v7', editor.innerHTML);
        }

        // --- Calculator Logic ---
        async function fetchRate() {
            try {
                const res = await fetch('https://api.exchangerate-api.com/v4/latest/JPY');
                const data = await res.json();
                if (data && data.rates && data.rates.TWD) {
                    currentRate = data.rates.TWD;
                    document.getElementById('rate-val').innerText = currentRate.toFixed(3);
                    
                    const dateStr = data.date || new Date().toISOString().split('T')[0];
                    const timeStr = new Date().toLocaleTimeString('zh-TW', {hour: '2-digit', minute:'2-digit'});
                    document.getElementById('rate-source').innerText = `è³‡æ–™ä¾†æº: ExchangeRate-API | æ›´æ–°: ${dateStr} ${timeStr}`;
                }
            } catch (e) {
                document.getElementById('rate-source').innerText = `è³‡æ–™ä¾†æº: é è¨­å€¼ (é›¢ç·šæ¨¡å¼)`;
            }
        }

        function calc(source) {
            const jpyInput = document.getElementById('input-jpy');
            const twdInput = document.getElementById('input-twd');
            
            if (source === 'jpy') {
                const val = parseFloat(jpyInput.value);
                if (!isNaN(val)) twdInput.value = (val * currentRate).toFixed(0);
                else twdInput.value = '';
            } else {
                const val = parseFloat(twdInput.value);
                if (!isNaN(val)) jpyInput.value = (val / currentRate).toFixed(0);
                else jpyInput.value = '';
            }
        }

        function resetCalc() {
            document.getElementById('input-jpy').value = '';
            document.getElementById('input-twd').value = '';
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            const editor = document.getElementById('shoppingNote');
            const savedContent = localStorage.getItem('wbc_shopping_note_v7');
            if (savedContent && editor) editor.innerHTML = savedContent;
            if (editor) editor.addEventListener('input', saveNote);

            fetchRate();
            document.getElementById('input-jpy').addEventListener('input', () => calc('jpy'));
            document.getElementById('input-twd').addEventListener('input', () => calc('twd'));
            
            // Init Slider Height
            setTimeout(() => updateSliderHeight('d1'), 100);
        });
    </script>
</body>
</html>